INSERT INTO USUARIO VALUES ('7328', 'ADM55941', 'ADMINISTRADOR');
INSERT INTO USUARIO VALUES ('0001', 'USER0001', 'USUARIO');

INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-01', 'MICROSOFT', 'MICROSOFT LTDA.', 
							'RUA 1, 100 - SÃO PAULO/SP', 'CONTATO@MICROSOFT.COM', '(11) 1111-1111');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-02', 'APPLE', 'APPLE LTDA.', 
							'RUA 2, 200 - SÃO PAULO/SP', 'CONTATO@APPLE.COM', '(11) 2222-2222');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-03', 'SAMSUNG', 'SAMSUNG LTDA.', 
							'RUA 3, 300 - SÃO PAULO/SP', 'CONTATO@SAMSUNG.COM', '(11) 3333-3333');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-04', 'LG', 'LG LTDA.', 
							'RUA 4, 400 - SÃO PAULO/SP', 'CONTATO@LG.COM', '(11) 4444-4444');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-05', 'NOKIA', 'NOKIA LTDA.', 
							'RUA 5, 500 - SÃO PAULO/SP', 'CONTATO@NOKIA.COM', '(11) 5555-5555');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-06', 'MOTOROLA', 'MOTOROLA LTDA.', 
							'RUA 6, 600 - SÃO PAULO/SP', 'CONTATO@MOTOROLA.COM', '(11) 6666-6666');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-07', 'DELL', 'DELL LTDA.', 
							'RUA 7, 700 - SÃO PAULO/SP', 'CONTATO@DELL.COM', '(11) 7777-7777');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-08', 'HP', 'HP LTDA.', 
							'RUA 8, 800 - SÃO PAULO/SP', 'CONTATO@HP.COM', '(11) 8888-8888');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-09', 'SONY', 'SONY LTDA.', 
							'RUA 9, 900 - SÃO PAULO/SP', 'CONTATO@SONY.COM', '(11) 9999-9999');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-10', 'ACCER', 'ACCER LTDA.', 
							'RUA 10, 1000 - SÃO PAULO/SP', 'CONTATO@ACCER.COM', '(11) 1111-1000');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-11', 'SMS', 'SMS LTDA.', 
							'RUA 11, 1100 - SÃO PAULO/SP', 'CONTATO@SMS.COM', '(11) 1111-1100');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-12', 'RAGTECH', 'RAGTECH LTDA.', 
							'RUA 12, 1200 - SÃO PAULO/SP', 'CONTATO@RAGTECH.COM', '(11) 1111-1200');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-13', 'FORCELINE', 'FORCELINE LTDA.', 
							'RUA 13, 1300 - SÃO PAULO/SP', 'CONTATO@FORCELINE.COM', '(11) 1111-1300');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-14', 'APC', 'APC LTDA.', 
							'RUA 14, 1400 - SÃO PAULO/SP', 'CONTATO@APC.COM', '(11) 1111-1400');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-15', 'PHILIPS', 'PHILIPS LTDA.', 
							'RUA 15, 1500 - SÃO PAULO/SP', 'CONTATO@PHILIPS.COM', '(11) 1111-1500');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-16', 'MULTILASER', 'MULTILASER LTDA.', 
							'RUA 16, 1600 - SÃO PAULO/SP', 'CONTATO@MULTILASER.COM', '(11) 1111-1600');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-17', 'ADOBE', 'ADOBE LTDA.', 
							'RUA 17, 1700 - SÃO PAULO/SP', 'CONTATO@ADOBE.COM', '(11) 1111-1700');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-18', 'CANON', 'CANON LTDA.', 
							'RUA 18, 1800 - SÃO PAULO/SP', 'CONTATO@CANON.COM', '(11) 1111-1800');
INSERT INTO FORNECEDOR VALUES ('01.234.567/0001-19', 'GAMES', 'GAMES LTDA.', 
							'RUA 19, 1900 - SÃO PAULO/SP', 'CONTATO@GAMES.COM', '(11) 1111-1900');

INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'ACESSORIOS');
INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'SOFTWARES');
INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'JOGOS');
INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'NOBREAKS');
INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'NOTEBOOKS');
INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'TABLETS');
INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'CELULARES');
INSERT INTO CATEGORIA_PRODUTO VALUES(NULL, 'MONITORES');

INSERT INTO LOCAL_ESTOQUE VALUES('A1P1','ARMARIO 1 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A1P2','ARMARIO 1 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A1P3','ARMARIO 1 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A1P4','ARMARIO 1 - PRATELEIRA 4');
INSERT INTO LOCAL_ESTOQUE VALUES('A1P5','ARMARIO 1 - PRATELEIRA 5');
INSERT INTO LOCAL_ESTOQUE VALUES('A1P6','ARMARIO 1 - PRATELEIRA 6');

INSERT INTO LOCAL_ESTOQUE VALUES('A2P1','ARMARIO 2 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A2P2','ARMARIO 2 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A2P3','ARMARIO 2 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A2P4','ARMARIO 2 - PRATELEIRA 4');

INSERT INTO LOCAL_ESTOQUE VALUES('A3P1','ARMARIO 3 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A3P2','ARMARIO 3 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A3P3','ARMARIO 3 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A3P4','ARMARIO 3 - PRATELEIRA 4');

INSERT INTO LOCAL_ESTOQUE VALUES('A4P1','ARMARIO 4 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A4P2','ARMARIO 4 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A4P3','ARMARIO 4 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A4P4','ARMARIO 4 - PRATELEIRA 4');

INSERT INTO LOCAL_ESTOQUE VALUES('A5P1','ARMARIO 5 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A5P2','ARMARIO 5 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A5P3','ARMARIO 5 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A5P4','ARMARIO 5 - PRATELEIRA 4');
INSERT INTO LOCAL_ESTOQUE VALUES('A5P5','ARMARIO 5 - PRATELEIRA 5');
INSERT INTO LOCAL_ESTOQUE VALUES('A5P6','ARMARIO 5 - PRATELEIRA 6');

INSERT INTO LOCAL_ESTOQUE VALUES('A6P1','ARMARIO 6 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A6P2','ARMARIO 6 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A6P3','ARMARIO 6 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A6P4','ARMARIO 6 - PRATELEIRA 4');
INSERT INTO LOCAL_ESTOQUE VALUES('A6P5','ARMARIO 6 - PRATELEIRA 5');

INSERT INTO LOCAL_ESTOQUE VALUES('A7P1','ARMARIO 7 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A7P2','ARMARIO 7 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A7P3','ARMARIO 7 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A7P4','ARMARIO 7 - PRATELEIRA 4');
INSERT INTO LOCAL_ESTOQUE VALUES('A7P5','ARMARIO 7 - PRATELEIRA 5');

INSERT INTO LOCAL_ESTOQUE VALUES('A8P1','ARMARIO 8 - PRATELEIRA 1');
INSERT INTO LOCAL_ESTOQUE VALUES('A8P2','ARMARIO 8 - PRATELEIRA 2');
INSERT INTO LOCAL_ESTOQUE VALUES('A8P3','ARMARIO 8 - PRATELEIRA 3');
INSERT INTO LOCAL_ESTOQUE VALUES('A8P4','ARMARIO 8 - PRATELEIRA 4');

INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/02/14',3200.50,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/03/05',4000.80,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/03/26',2850.50,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/04/02',5502.00,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/04/28',1200.50,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/05/07',1920.75,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/05/24',920.30,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/06/04',2040.67,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/06/09',3456.50,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/06/27',2603.78,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/07/01',760.00,'PAGO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/07/11',1010.30,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/07/23',910.70,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/07/29',3000.30,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/08/07',310.00,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/08/12',6590.30,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/08/15',6590.30,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/08/18',1590.30,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/08/22',4580.30,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/08/25',1230.30,'EM ABERTO');
INSERT INTO NOTA_FISCAL VALUES(NULL,'2014/08/25',4560.30,'EM ABERTO');

SELECT * FROM NOTA_FISCAL;

INSERT INTO produto VALUES (1,'CABOS',100,10,'A1P1',1),(2,'WEBCAM CANON',20,80,'A1P2',1),(3,'PEN DRIVE MULTILASER',45,30,'A1P3',1),(4,'TECLADO MICROSOFT',40,15,'A1P4',1),(5,'MOUSE MICROSOFT',30,10,'A1P5',1),(6,'IMPRESSORA HP',25,160,'A1P6',1),(7,'VISUAL STUDIO',20,800,'A2P1',2),(8,'ADOBE PHOTOSHOP',31,500,'A2P2',2),(9,'MICROSOFT OFFICE',42,350,'A2P3',2),(10,'MICROSOFT WINDOWS',88,220,'A2P4',2),(11,'WAR OF WARCRAFT',8,80.75,'A3P1',3),(12,'WORMS',18,90.6,'A3P2',3),(13,'COUNTER STRIKE',26,75.3,'A3P3',3),(14,'AGE OF EMPIRES',10,88.88,'A3P4',3),(15,'NOBREAK SMS',5,1.2,'A4P1',4),(16,'NOBREAK RAGTECH',13,800,'A4P2',4),(17,'NOBREAK FORCELINE',1,320,'A4P3',4),(18,'NOBREAK APC',2,600,'A4P4',4),(19,'NOTEBOOK SAMSUNG',20,1200,'A5P1',5),(20,'NOTEBOOK DELL',20,900,'A5P2',5),(21,'NOTEBOOK HP',11,888,'A5P3',5),(22,'NOTEBOOK SONY',20,1320,'A5P4',5),(23,'NOTEBOOK APPLE',12,1540,'A5P5',5),(24,'NOTEBOOK ACCER',20,700,'A5P6',5),(25,'TABLET SAMSUNG',20,620,'A6P1',6),(26,'TABLET APPLE',10,782,'A6P2',6),(27,'TABLET MULTILASER',20,400,'A6P3',6),(28,'TABLET PHILIPS',13,499.99,'A6P4',6),(29,'TABLET LG',9,500,'A6P5',6),(30,'CELULAR NOKIA',25,220,'A7P1',7),(31,'CELULAR SAMSUNG',11,730,'A7P2',7),(32,'CELULAR APPLE',17,859,'A7P3',7),(33,'CELULAR LG',25,722,'A7P4',7),(34,'CELULAR MOTOROLA',7,540,'A7P5',7),(35,'MONITOR ACCER',12,150,'A8P1',8),(36,'MONITOR LG',12,220,'A8P2',8),(37,'MONITOR SAMSUNG',9,250,'A8P3',8),(38,'MONITOR PHILIPS',12,200,'A8P4',8);


INSERT INTO FORNECEDOR_PRODUTO VALUES(4,'01.234.567/0001-01',1,10);
INSERT INTO FORNECEDOR_PRODUTO VALUES(5,'01.234.567/0001-01',1,15);
INSERT INTO FORNECEDOR_PRODUTO VALUES(7,'01.234.567/0001-01',1,8);
INSERT INTO FORNECEDOR_PRODUTO VALUES(9,'01.234.567/0001-01',1,7);
INSERT INTO FORNECEDOR_PRODUTO VALUES(10,'01.234.567/0001-01',1,22);

INSERT INTO FORNECEDOR_PRODUTO VALUES(23,'01.234.567/0001-02',3,5);
INSERT INTO FORNECEDOR_PRODUTO VALUES(26,'01.234.567/0001-02',3,10);
INSERT INTO FORNECEDOR_PRODUTO VALUES(32,'01.234.567/0001-02',3,15);

INSERT INTO FORNECEDOR_PRODUTO VALUES(19,'01.234.567/0001-03',2,5);
INSERT INTO FORNECEDOR_PRODUTO VALUES(25,'01.234.567/0001-03',2,10);
INSERT INTO FORNECEDOR_PRODUTO VALUES(31,'01.234.567/0001-03',5,15);
INSERT INTO FORNECEDOR_PRODUTO VALUES(37,'01.234.567/0001-03',5,8);

INSERT INTO FORNECEDOR_PRODUTO VALUES(29,'01.234.567/0001-04',7,10);
INSERT INTO FORNECEDOR_PRODUTO VALUES(33,'01.234.567/0001-04',7,15);
INSERT INTO FORNECEDOR_PRODUTO VALUES(36,'01.234.567/0001-04',7,6);

INSERT INTO FORNECEDOR_PRODUTO VALUES(30,'01.234.567/0001-05',10,23);

INSERT INTO FORNECEDOR_PRODUTO VALUES(20,'01.234.567/0001-07',4,12);

INSERT INTO FORNECEDOR_PRODUTO VALUES(6,'01.234.567/0001-08',12,4);
INSERT INTO FORNECEDOR_PRODUTO VALUES(21,'01.234.567/0001-08',12,5);

INSERT INTO FORNECEDOR_PRODUTO VALUES(22,'01.234.567/0001-09',8,3);

INSERT INTO FORNECEDOR_PRODUTO VALUES(24,'01.234.567/0001-10',14,3);
INSERT INTO FORNECEDOR_PRODUTO VALUES(35,'01.234.567/0001-10',14,4);

INSERT INTO FORNECEDOR_PRODUTO VALUES(17,'01.234.567/0001-13',9,2);

INSERT INTO FORNECEDOR_PRODUTO VALUES(28,'01.234.567/0001-15',11,12);
INSERT INTO FORNECEDOR_PRODUTO VALUES(38,'01.234.567/0001-15',11,1);

INSERT INTO FORNECEDOR_PRODUTO VALUES(3,'01.234.567/0001-16',13,30);
INSERT INTO FORNECEDOR_PRODUTO VALUES(27,'01.234.567/0001-16',13,2);
INSERT INTO FORNECEDOR_PRODUTO VALUES(3,'01.234.567/0001-16',16,20);

INSERT INTO FORNECEDOR_PRODUTO VALUES(8,'01.234.567/0001-17',15,13);

INSERT INTO FORNECEDOR_PRODUTO VALUES(2,'01.234.567/0001-18',6,6);

INSERT INTO FORNECEDOR_PRODUTO VALUES(11,'01.234.567/0001-19',17,8);
INSERT INTO FORNECEDOR_PRODUTO VALUES(13,'01.234.567/0001-19',17,6);

INSERT INTO FORNECEDOR_PRODUTO VALUES(31,'01.234.567/0001-03',18,12);
INSERT INTO FORNECEDOR_PRODUTO VALUES(25,'01.234.567/0001-03',18,12);

INSERT INTO FORNECEDOR_PRODUTO VALUES(32,'01.234.567/0001-02',19,10);
INSERT INTO FORNECEDOR_PRODUTO VALUES(26,'01.234.567/0001-02',19,10);
INSERT INTO FORNECEDOR_PRODUTO VALUES(23,'01.234.567/0001-02',19,1);

INSERT INTO FORNECEDOR_PRODUTO VALUES(21,'01.234.567/0001-08',20,5);

INSERT INTO FORNECEDOR_PRODUTO VALUES(23,'01.234.567/0001-02',21,4);

-- **** TESTANDO RELATÓRIOS ****

-- PRODUTOS EM QUANTIDADE BAIXA
SELECT CODIGO, DESCRICAO, QUANTIDADE, PRECO FROM PRODUTO
	WHERE QUANTIDADE < 10;

-- LISTA DA QUANTIDADE DE PRODUTOS POR CATEGORIA
SELECT CATEGORIA_PRODUTO_CODIGO, CATEGORIA_PRODUTO.DESCRICAO, SUM(QUANTIDADE)
	FROM PRODUTO, CATEGORIA_PRODUTO WHERE CATEGORIA_PRODUTO_CODIGO = CATEGORIA_PRODUTO.CODIGO
	GROUP BY CATEGORIA_PRODUTO_CODIGO;

-- FORNECEDORES MAIS ATIVOS
SELECT FORNECEDOR_CNPJ, COUNT(FORNECEDOR_CNPJ) AS QUANTIDADE FROM FORNECEDOR_PRODUTO GROUP BY FORNECEDOR_CNPJ
	ORDER BY COUNT(FORNECEDOR_CNPJ) DESC LIMIT 5;

-- TOTAL COMPRADO EM UM MÊS (FUNÇÃO ROUND PARA LIMITAR CASAS DECIMAIS)
SELECT ROUND(SUM(VALOR), 2) AS 'VALOR TOTAL' FROM NOTA_FISCAL WHERE DATA <= CURDATE() AND DATA >= DATE_SUB(CURDATE(), 
	INTERVAL 30 DAY);

-- **** CRIAÇÃO DE TRIGGER ****
DELIMITER ?
CREATE TRIGGER ATUALIZA_ESTOQUE
BEFORE INSERT ON FORNECEDOR_PRODUTO
FOR EACH ROW
BEGIN
	UPDATE PRODUTO SET QUANTIDADE = QUANTIDADE + NEW.QUANTIDADE
	WHERE CODIGO = NEW.PRODUTO_CODIGO;
END;
?

DROP TRIGGER ATUALIZA_ESTOQUE?

CREATE FUNCTION SOMA_VALORES (NOTAFISCAL INT) RETURNS FLOAT
BEGIN
	DECLARE TOTAL FLOAT;
	SET TOTAL = (SELECT SUM(PRECO) FROM PRODUTO, FORNECEDOR_PRODUTO
					WHERE PRODUTO_CODIGO = CODIGO
					AND NOTA_FISCAL_NUMERO = NOTAFISCAL);
	RETURN TOTAL;
END;
?

CREATE TRIGGER ATUALIZA_VALOR
AFTER INSERT ON FORNECEDOR_PRODUTO
FOR EACH ROW
BEGIN
	UPDATE NOTA_FISCAL SET VALOR = SOMA_VALORES(NEW.NOTA_FISCAL_NUMERO)
		WHERE NUMERO = NEW.NOTA_FISCAL_NUMERO;
END;
?

DROP TRIGGER ATUALIZA_VALOR?

INSERT INTO FORNECEDOR_PRODUTO VALUES(4,'01.234.567/0001-01',1,10);